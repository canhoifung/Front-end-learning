# 字体

## `font-weight`

1. 每个数字对应的权重至少和前面的数字具有相同的`font-weight`
2. 一般400对应normal，700对应bold
3. 若有比Medium更细的字体可以分配给400，此时Medium分配给500；若只有一个Medium变体，则分配给400
4. 若字体族中字重少于9个，用户代理所作的工作：
   1. 若500未分配，则与400对应字重一样
   2. 若300未分配，将其对应于比400细的变体，若无则和400一样。200和100同理
   3. 若600未分配，将其对应于比500黑的变体，若无则和500一样。700、800和900同理
5. `bolder`会先确定父元素继承的`font-weight`，然后选择比继承的字重高一级的最小数字，若无则将字重设为下一个数字值，直到900。
   1. 由于字重分配的原因，`bolder`和父元素为`bold`的视觉效果可能一致，但是字重可能不一样
   2. 若父元素为`light`，则子元素的`bolder`对应字型可能是`normal`，不一定是`bold`

# 字号

1. 不同换算系数的绝对定位大小：

   | 关键字   | CSS1 | CSS2 | CSS3 |
   | -------- | ---- | ---- | ---- |
   | xx-small | 5px  | 9px  | 10px |
   | x-small  | 7px  | 11px | 12px |
   | Small    | 11px | 13px | 14px |
   | Medium   | 16px | 16px | 16px |
   | Large    | 24px | 19px | 19px |
   | x-large  | 36px | 23px | 24px |
   | xx-large | 54px | 28px | 32px |

2. 但是换算系数用户代理可以调整

3. 相对定位大小换算系数和绝对定位一样

4. 字号的相对值没有上下限

5. ==字号继承的是计算得到的值，而不是百分数本身==

6. 设定的`font-size`*（`font-size-adjust`/字体的高宽比值）=== 调整后的`font-size`

# 文本

1. `white-space`属性区别：

   | 值       | 空白 | 换行符 | 自动换行 |
   | -------- | ---- | ------ | -------- |
   | pre-line | 折叠 | 保留   | 允许     |
   | normal   | 折叠 | 忽略   | 允许     |
   | nowrap   | 折叠 | 忽略   | 禁止     |
   | pre      | 保留 | 保留   | 禁止     |
   | pre-warp | 保留 | 保留   | 允许     |

2. `word-break`属性区别：

   | CCJK值    | 非CJK        | CJK          | 是否断字 |
   | --------- | ------------ | ------------ | -------- |
   | noraml    | 照常         | 照常         | 是       |
   | break-all | 任何字符之后 | 任何字符之后 | 否       |
   | keep-all  | 照常         | 序列两侧     | 是       |

# 视觉可视化

1. `border-box`：
   1. content-box：默认值，盒子不包含内边距和边框
   2. border-box：盒子包含内边距和边框
2. margin-left + border-left + padding-left + width + padding-right + border-right + margin-right = 父元素width
   1. 其中可以设为auto的只有margin和width，其他的不设置具体值则默认为0
   2. 因此若margin-left、margin-right和width有设为auto，其他的值需要自适应到符合上述公式
   3. 若三个值都设置了固定值，则为**过约束**，margin-right将会强制设为auto，会被强制设置为符合算式的值，即总和不能小于或大于父元素width，必须相等
   4. 若三个值都设置了auto，margin为0，width为全宽
   5. 若margin-left或margin-right其中之一和width设置了auto，设置了auto的margin会为0，
   6. 以上公式为content-box下，若为border-box则删除padding和border
   7. 若为块级置换元素（例如img），若width设为auto，则等于内容本身的宽度，且height会随width按比例变化，除非明确设定了height
3. 纵向高度上，margin-top或margin-bottom设为auto，会自动计算为0
4. 若为百分数高度，百分数是相对于框体的容纳块高度而言，因此若容纳块高度为auto，则百分数高度无效，自动计算为auto
5. 若height：auto，其高度为：
   1. 子代为块级元素，默认高度=最上边块级子元素的上边框外侧 到 最下边块级子元素的下边框外侧之间
   2. 块级元素有内边距或边框，高度=最上边子元素的上外边距外边界 到 最下边子元素的下外边距的外边界之间
6. 纵向外边距会折叠，显示较大的外边距
7. 若两个相邻外边距为负值，取其中绝对值较大的，然后从正外边距中减去它的绝对值作为外边距
8. 对于行内非置换元素：
   1. 内容区高度为font-size值
   2. 行距为line-height和font-size的差值
   3. 行内框高度=内容区高度+行距
   4. 行框高度 = 各行内框的最高点和最低点之间的距离
9. 对于行内非置换元素的盒模型：
   1. 因为边框边界由font-size控制，因此边框不影响行框
   2. 因为内边距不影响font-size，既不影响内容区高度，因此也不会影响行框
   3. 由于外边距透明，且不会影响到行框，因此上下外边距不会有视觉效果，但左右外边距会有效果，可以通过`box-decoration-break`属性控制断行效果
10. 对于行内置换元素：
    1. 行内置换元素的高度不影响行中任何元素（包括置换元素本身）的行高
    2. 行内框高度=内容+外边距+边框+内边距
    3. 与基线对齐对的是外边距边界
    4. 宽度则会有影响
11. `display:inline-block`，将元素当作置换元素进行格式化，处理行为相当于处理行内置换元素，在外部作为行内元素，在内部作为块级元素内容，且可以使用块级元素的css属性
    1. 可用于为元素设置宽高（行内非置换元素无法设置宽高）

# 内边距、边框、轮廓、外边距

1. `padding`内容规则：
   + 若没有针对左边的，就使用针对右边的值
   + 若没有针对底边的，就使用针对顶边的值
   + 若没有针对右边的，就使用针对顶边的值
   + 若为百分比，则相对于父元素内容区的宽度计算（若相对自身，则父元素也会变化，会陷入循环）
2. `border`规则：
   + 若`border-style:none`，则边框不存在，不管`border-width`是多少
   + 而`border-style`默认值就是`none`
   + 给`border-radius`给固定数值接近圆，而给百分比值则接近圆角
   + `border-radius`也可以设置四个值，规则和padding的一致
   + `border-radius`设置复杂圆角的方式：`border-radius:3ch/1ch`，斜线前为横向半径，斜线后为纵向半径，上述写法等价于：`border-radius:3ch 3ch 3ch 3ch/1ch 1ch 1ch 1ch`，斜线前后分别对应
   + 单独设置单边radius时，若提供两个值，则默认一个为横向半径，一个为纵向半径，不一定需要斜线来划分，当然也可以有斜线
   + `border-image-slice`针对的是边框背景图片，而`border-image-width`针对的是边框本身
   + 若`border-image-width`为数值，则表示`border-width`的倍数
   + 若`border-image-outset`为数值，同样表示`border-width`的倍数
   + `border-image`简写方法，必须按照指定的顺序排列**裁剪、宽度、偏移**，其余的source和repeat可以写在任何位置
3. `outline`规则：
   1. 轮廓不占空间、不一定是矩形、通常用于在：focus时渲染轮廓、无法设置单边
4. `margin`规则：
   1. 和`padding`一致，若为百分数，是相对于父元素内容区的宽度进行计算

# 颜色、背景和渐变

1. `background-position`规则：
   1. 若为百分数，比如`background-position:30% 70%`意为找到元素上横向位置为30%、纵向位置为70%的点，和图片横向位置为30%、纵向位置为70%的点对应
   2. 若百分数只有一个，默认为横向偏移，且纵向偏移默认为50%
   3. 若为长度数值，则用图像左上角和声明的点对齐
   4. 可以使用最多四个关键字来指定偏移位置，如：`background-position:left 30% top 30%`，此时若方向偏移量为0，可以忽略偏移量，但是边界关键字不能忽略，且此时不固定横向纵向的排序顺序
2. `background-repeat`规则：
   1. 若有两个值，第一个表示横向，第二个表示纵向
   2. 若只有一个值，表示横纵向都按照这个分配
   3. 若设置为`space`：
      1. 若某个方向上只能出现一次，出现位置根据该方向上`background-position`来判断
      2. 若某个方向上出现多次，忽略该方向上`background-position`的值
   4. 若设置为`round`，则分为两种情况
      1. 源图像放在四个角上，会拉伸图像进行填充
      2. 源图像并不是在四个角上，图像仍然会缩放，但是可能会被裁剪
   5. `space`和`round`是根据相对背景定位区域决定的，即`background-origin`的值
3. `background-size`规则：
   1. 若为`auto`：
      1. 若一个轴尺寸为auto，另一个不是，且图像有宽高比，则会根据宽高比计算
      2. 若一个轴尺寸为auto，另一个不是，且图像无宽高比，但有尺寸信息，那么设置为auto的那一个轴将会设为固有尺寸信息
      3. 若以上都没有执行，auto将解析为100%
   2. 使用`cover`和`contain`的图像，限定区域为`background-origin`定义的区域
4. `background`规则：
   1. `size`必须紧跟在`position`后面，且二者要以斜线隔开
   2. 若同时为`origin`和`clip`提供值，第一个作为`origin`，第二个作为`clip`
   3. 若只提供一个值，则同时设定`origin`和`clip`
   4. 可以设置不止一个背景层，但`color`只会出现在最后一个背景层中
   5. 除了`color`和`image`外，若`image`和其他属性不匹配，其他属性会自动从第一个开始进行重复，直至补全
5. `linear-gradiant`规则：
   1. 若<color-stop>的定位点在比前一个的定位点要小，则设为前一个定位点的位置
   2. 梯度线确定规则：若为关键字指定，则经过图像的中点将声明的两个角的两个相邻角连起来，梯度线与该线垂直
   3. 即比如梯度线方向为`top right`，并不是指向图像的右上角，而是指向右上象限
6. `radial-gradient`规则：
   1. 若为圆，梯度射线终点为尺寸值
   2. 若为椭圆，梯度射线重点为横轴尺寸值
   3. 若为圆，且尺寸为0，规定圆的半径为大于0的特别特别小的值，即渐变仍然是圆形，不过可能看不到
   4. 若为椭圆，若宽度为0，将椭圆的高度当作特别大的值，将宽度当作比0大的特别小的值
      1. 则宽度为0时，显示效果为纵向对称的横向线性渐变
      2. 若高度为0，得到的结果会是纯色



# 浮动及其形状

1. 浮动元素的容纳块是最近的块级祖辈元素
2. 浮动元素的左右边距不能超过容纳块的左右内边界
3. 行内框和浮动元素重叠时，其边框背景内容都在浮动元素之上渲染
4. 块级框和浮动元素重叠时，边框背景在浮动元素背后渲染，内容在前面渲染
5. `shape-outside`设置区域超出浮动框会被裁减

# 定位

1. `position:absolute`时，容纳块为最近的`position`非`static`的祖辈元素，且：
   1. 若祖辈为块级，容纳块为其内边距边界
   2. 若祖辈为行内，容纳块为其内容边界
   3. 若无祖辈，容纳块为初始容纳块
2. `position:absolute`，且除`bottom`之外的某个偏移属性为auto时：
   1. 顶边与假设定位元素`position:static`时的顶边对齐
   2. 左右类似顶边规则
3. 紧接规则2，对于非置换元素：
   1. width和height设为auto意为自动缩放，自动包裹内容
   2. 需要满足left + right + margin-left + border-left + padding-left + width + padding-right + border-right + margin-right = 容纳块宽度
   3. 对于从左向右书写的语言，若不满足规则2，且全部是固定值，会自动将right设为auto，若纵向尺寸过约束了，则bottom的值会被自动计算
4. 紧接规则2，对于置换元素：
   1. width和height设为auto，则由元素内容的内在宽高决定具体宽高
   2. 对从左向右的语言，若left为auto，则为静态位置
   3. 若无法为静态位置仍然为auto，则margin-left的auto为0
   4. 若margin-left和margin-right的值仍为auto，将二者设为相等
   5. 若还有一个属性为auto，修改为满足等式的值
   6. 若过约束，同规则3第四点
5. 对相对定位而言，若偏移过约束，则将一个定位视为另一个定位的相反数，如bottom=-top，right=-left，需要考虑书写顺序，以上情况为从左到右书写时

# 弹性盒布局

1. `display:flex`或`display:inline-flex`
2. `flex-direction:column`中`column`指当前书写模式下块级元素的移动方向，如英语中为纵轴，在日语中指横轴
3. `flex-direction:row`指按照文本方向即书写模式布置弹性元素，因此不需要考虑文本是从左到右还是从右到左，row会自动转换弹性方向